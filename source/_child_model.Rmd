## {{species}}

```{r}
m_nb2 <- sdmTMB(
  {{species}} ~
    s(jaar)
  + type
  + rijshf
  + vers_gem
  + vers_stdev
  + (1 | traject)
  ,
  data = strand,
  family = nbinom2(),
  spatial = "off")
```

```{r eval=!is.null(m_nb2)}
set.seed(123)
rq_res <- residuals(m_nb2, type = "mle-mvn")
rq_res <- rq_res[is.finite(rq_res)] # some Inf
qqnorm(rq_res)
abline(0, 1)

sanity(m_nb2)
```


```{r eval=!is.null(m_nb2)}
tidy(m_nb2)
tidy(m_nb2, effects = "ran_pars")
tidy(m_nb2, effects = "ran_vals")
```


```{r eval=!is.null(m_nb2)}
g <- ggpredict(m_nb2, "type [all]")
plot(g)
```

```{r eval=!is.null(m_nb2)}
g <- ggpredict(m_nb2, "jaar [all]")
plot(g)
```

```{r eval=!is.null(m_nb2)}
g <- ggpredict(m_nb2, "rijshf [all]")
plot(g)
```

```{r eval=!is.null(m_nb2)}
g <- ggpredict(m_nb2, "vers_gem [all]")
plot(g)
```


```{r eval=!is.null(m_nb2)}
g <- ggpredict(m_nb2, "vers_stdev [all]")
plot(g)
```

